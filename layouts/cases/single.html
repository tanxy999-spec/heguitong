{{ define "main" }}
<div class="container mx-auto px-4 py-8">
    <nav class="mb-6 text-sm">
        <a href="/" class="text-gray-500 hover:text-primary">首页</a>
        <span class="mx-2 text-gray-500">/</span>
        <a href="/cases/" class="text-gray-500 hover:text-primary">案例库</a>
        <span class="mx-2 text-gray-500">/</span>
        <span class="text-neutral">{{ .Title }}</span>
    </nav>
    
    <div class="bg-white rounded-md border border-darkGray overflow-hidden">
        <div class="relative">
            <img src="https://picsum.photos/seed/{{ .Params.slug | default .Title }}/1200/400" alt="{{ .Title }}" class="w-full h-64 md:h-96 object-cover">
            <div class="absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center">
                <div class="text-center text-white px-4">
                    <h1 class="text-3xl md:text-4xl font-bold mb-4">{{ .Title }}</h1>
                    <div class="flex flex-wrap justify-center gap-2 mb-4">
                        {{ range .Params.categories }}
                        {{ if eq . "punishment" | or (eq . "行政处罚案例") | or (eq . "行政处罚") }}
                        <span class="bg-red-500 text-white text-sm px-3 py-1 rounded-full">行政处罚案例</span>
                        {{ else if eq . "success" | or (eq . "合规成功案例") | or (eq . "合规成功") }}
                        <span class="bg-green-500 text-white text-sm px-3 py-1 rounded-full">合规成功案例</span>
                        {{ else if eq . "industry" | or (eq . "行业典型案例") | or (eq . "行业典型") }}
                        <span class="bg-blue-500 text-white text-sm px-3 py-1 rounded-full">行业典型案例</span>
                        {{ else }}
                        <span class="bg-gray-500 text-white text-sm px-3 py-1 rounded-full">{{ . }}</span>
                        {{ end }}
                        {{ end }}
                    </div>
                    <div class="text-white opacity-90">
                        <i class="fa fa-calendar mr-2"></i> {{ .Date.Format "2006年01月02日" }}
                    </div>
                </div>
            </div>
        </div>
        
        <div class="p-6 md:p-10 bg-gradient-to-br from-white to-gray-50">
            <div class="max-w-4xl mx-auto bg-white rounded-lg shadow-md p-8 md:p-10">
                {{ .Content }}
                
                <div class="mt-10 pt-8 border-t border-darkGray">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-xl font-semibold text-neutral">相关案例</h3>
                        <a href="/cases/" class="text-primary hover:text-red-700 font-medium flex items-center">
                            查看更多案例 <i class="fa fa-angle-right ml-2"></i>
                        </a>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        {{ $related := .Site.RegularPages.Related . | first 3 }}
                        {{ with $related }}
                        {{ range . }}
                        <div class="bg-white border border-darkGray rounded-md overflow-hidden hover:shadow-lg transition-all duration-300">
                            <div class="relative">
                                <img src="https://picsum.photos/seed/{{ .Params.slug | default .Title }}/600/400" alt="{{ .Title }}" class="w-full h-40 object-cover">
                                {{ range .Params.categories }}
                                {{ if eq . "punishment" | or (eq . "行政处罚案例") | or (eq . "行政处罚") }}
                                <span class="absolute top-3 left-3 bg-red-500 text-white text-xs px-2 py-1 rounded">行政处罚</span>
                                {{ else if eq . "success" | or (eq . "合规成功案例") | or (eq . "合规成功") }}
                                <span class="absolute top-3 left-3 bg-green-500 text-white text-xs px-2 py-1 rounded">合规成功</span>
                                {{ else if eq . "industry" | or (eq . "行业典型案例") | or (eq . "行业典型") }}
                                <span class="absolute top-3 left-3 bg-blue-500 text-white text-xs px-2 py-1 rounded">行业典型</span>
                                {{ else }}
                                <span class="absolute top-3 left-3 bg-gray-500 text-white text-xs px-2 py-1 rounded">{{ . }}</span>
                                {{ end }}
                                {{ end }}
                            </div>
                            <div class="p-4">
                                <h4 class="text-lg font-semibold text-neutral mb-2 line-clamp-2">{{ .Title }}</h4>
                                <p class="text-gray-600 text-sm mb-3 line-clamp-2">{{ .Description }}</p>
                                <a href="{{ .Permalink }}" class="text-primary hover:text-red-700 font-medium flex items-center text-sm">
                                    查看详情 <i class="fa fa-angle-right ml-1"></i>
                                </a>
                            </div>
                        </div>
                        {{ end }}
                        {{ else }}
                        <!-- 如果没有相关案例，显示一些默认案例 -->
                        {{ range first 3 (where (where .Site.RegularPages "Section" "cases") ".Params.categories" "!=" nil) }}
                        <div class="bg-white border border-darkGray rounded-md overflow-hidden hover:shadow-lg transition-all duration-300">
                            <div class="relative">
                                <img src="https://picsum.photos/seed/{{ .Params.slug | default .Title }}/600/400" alt="{{ .Title }}" class="w-full h-40 object-cover">
                                {{ range .Params.categories }}
                                {{ if eq . "punishment" }}
                                <span class="absolute top-3 left-3 bg-red-500 text-white text-xs px-2 py-1 rounded">行政处罚</span>
                                {{ else if eq . "success" }}
                                <span class="absolute top-3 left-3 bg-green-500 text-white text-xs px-2 py-1 rounded">合规成功</span>
                                {{ else if eq . "industry" }}
                                <span class="absolute top-3 left-3 bg-blue-500 text-white text-xs px-2 py-1 rounded">行业典型</span>
                                {{ end }}
                                {{ end }}
                            </div>
                            <div class="p-4">
                                <h4 class="text-lg font-semibold text-neutral mb-2 line-clamp-2">{{ .Title }}</h4>
                                <p class="text-gray-600 text-sm mb-3 line-clamp-2">{{ .Description }}</p>
                                <a href="{{ .Permalink }}" class="text-primary hover:text-red-700 font-medium flex items-center text-sm">
                                    查看详情 <i class="fa fa-angle-right ml-1"></i>
                                </a>
                            </div>
                        </div>
                        {{ end }}
                        {{ end }}
                    </div>
                </div>
                
                <div class="mt-8 flex justify-between">
                    <a href="/cases/" class="inline-flex items-center px-4 py-2 border border-darkGray text-sm font-medium rounded-md text-neutral bg-white hover:bg-gray-50">
                        <i class="fa fa-arrow-left mr-2"></i> 返回案例列表
                    </a>
                    <button onclick="window.print()" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary hover:bg-red-700">
                        <i class="fa fa-print mr-2"></i> 打印案例
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 添加一些额外的样式 -->
<style>
    .line-clamp-2 {
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }
    
    @media print {
        .no-print {
            display: none !important;
        }
    }
    
    /* 内容区域样式增强 */
    .max-w-4xl.mx-auto {
        line-height: 1.6;
        color: #333;
    }
    
    /* 标题样式 */
    .max-w-4xl.mx-auto h1 {
        color: #2c3e50;
        font-size: 2.2rem;
        margin-bottom: 1.5rem;
        font-weight: 700;
        line-height: 1.3;
    }
    
    .max-w-4xl.mx-auto h2 {
        color: #34495e;
        font-size: 1.8rem;
        margin-top: 2.5rem;
        margin-bottom: 1.2rem;
        font-weight: 600;
        border-bottom: 2px solid #f0f0f0;
        padding-bottom: 0.5rem;
    }
    
    .max-w-4xl.mx-auto h3 {
        color: #34495e;
        font-size: 1.4rem;
        margin-top: 2rem;
        margin-bottom: 1rem;
        font-weight: 600;
    }
    
    /* 段落样式 */
    .max-w-4xl.mx-auto p {
        margin-bottom: 1.2rem;
        text-align: justify;
        color: #555;
    }
    
    /* 首段特殊样式 */
        .max-w-4xl.mx-auto p:first-of-type {
            font-size: 1.1rem;
            font-weight: 500;
            color: #444;
        }
        
        /* 列表样式 */
        .max-w-4xl.mx-auto ul,
        .max-w-4xl.mx-auto ol {
            margin-bottom: 1.5rem;
            padding-left: 1.5rem;
        }
        
        .max-w-4xl.mx-auto ul li {
            margin-bottom: 0.6rem;
            position: relative;
            padding-left: 1.2rem;
        }
        
        .max-w-4xl.mx-auto ul li::before {
            content: "•";
            color: #007bff;
            font-weight: bold;
            position: absolute;
            left: -1.2rem;
            font-size: 1.2em;
        }
        
        .max-w-4xl.mx-auto ol li {
            margin-bottom: 0.6rem;
        }
        
        /* 引用样式 */
        .max-w-4xl.mx-auto blockquote {
            margin: 2rem 0;
            padding: 1.5rem 2rem;
            border-left: 4px solid #007bff;
            background-color: #f8f9fa;
            font-style: italic;
            color: #555;
            border-radius: 0 6px 6px 0;
        }
        
        .max-w-4xl.mx-auto blockquote p {
            margin: 0;
        }
        
        /* 表格样式 */
        .max-w-4xl.mx-auto table {
            width: 100%;
            border-collapse: collapse;
            margin: 2rem 0;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            border-radius: 6px;
            overflow: hidden;
        }
        
        .max-w-4xl.mx-auto th,
        .max-w-4xl.mx-auto td {
            padding: 0.75rem 1rem;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .max-w-4xl.mx-auto th {
            background-color: #007bff;
            color: white;
            font-weight: 600;
        }
        
        .max-w-4xl.mx-auto tr:nth-child(even) {
            background-color: #f8f9fa;
        }
        
        .max-w-4xl.mx-auto tr:hover {
            background-color: #f0f0f0;
        }
</style>
{{ end }}